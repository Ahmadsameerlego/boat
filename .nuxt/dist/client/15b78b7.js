(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{480:function(t,e,r){t.exports=r.p+"img/91068-message-sent-successfully-plane.6d67390.gif"},540:function(t,e,r){var content=r(639);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(68).default)("500ee5be",content,!0,{sourceMap:!1})},638:function(t,e,r){"use strict";r(540)},639:function(t,e,r){var o=r(67)((function(i){return i[1]}));o.push([t.i,".btn-danger{background-color:#bd1212}.pill{align-items:center;border-radius:4px;color:#fff;display:flex;float:left;font-size:14px;height:36px;justify-content:center;margin-left:12px;margin-top:-29px;width:193px}.checkStep{color:#fff;left:29%;position:absolute;top:12px}.real-circle{position:relative}",""]),o.locals={},t.exports=o},733:function(t,e,r){"use strict";r.r(e);r(23),r(4),r(55);var o=r(16),n=(r(43),r(53),{data:function(){return{order:{},additives:[],free_additives:[],showAccept:!1,order_id:"",showRefuse:!1,reasons:[],reason:!1,showRate:!1,user_id:"",user_name:"",user_avatar:"",delegate_refused_reason:"",is_delegate_refused:null,user_refused_reason:"",is_user_canceled:null}},watch:{reason:function(){console.log(this.reason)}},methods:{closeRate:function(){this.showRate=!1},getDelegateOrders:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/delegate-single-order?order_id=".concat(t.$route.params.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){t.order=e.data.order,t.additives=e.data.order.additives,t.free_additives=e.data.order.free_additives,t.user_id=e.data.order.user_id,t.user_avatar=e.data.order.user_avatar,t.user_name=e.data.order.user_name,t.delegate_refused_reason=e.data.order.delegate_refused_reason,t.is_delegate_refused=e.data.order.is_delegate_refused,t.is_user_canceled=e.data.order.is_user_canceled,t.user_refused_reason=e.data.order.user_refused_reason}));case 2:case"end":return e.stop()}}),e)})))()},acceptOrder:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("order_id",t.$route.params.id),e.next=4,t.$axios.$post("/delegate-accept-order",r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){"success"==e.key?(t.showAccept=!0,t.getDelegateOrders()):t.$swal("","".concat(e.msg),"error")}));case 4:case"end":return e.stop()}}),e)})))()},getRefuseReasons:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/refuse-reasons",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){t.reasons=e.data.reasons}));case 2:case"end":return e.stop()}}),e)})))()},refuseOrder:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("order_id",t.$route.params.id),r.append("reason",t.reason),e.next=5,t.$axios.$post("/delegate-refuse-order",r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){"success"==e.key?(t.$swal("","".concat(e.msg),"success"),setTimeout((function(){t.$router.push("/provider/books/MyBooks")}),2e3)):t.$swal("","".concat(e.msg),"success")}));case 5:case"end":return e.stop()}}),e)})))()},endTrip:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("order_id",t.$route.params.id),r.append("delivery_status","delivering"),e.next=5,t.$axios.$post("/finish-order",r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){"success"==e.key?(t.$swal("","".concat(e.msg),"success"),setTimeout((function(){t.showRate=!0}),2e3)):t.$swal("","".concat(e.msg),"error")}));case 5:case"end":return e.stop()}}),e)})))()},showRefuseModal:function(){this.showRefuse=!0},closeRefuse:function(){this.showRefuse=!1},refreshOrder:function(){this.showAccept=!1,this.getDelegateOrders()},startTrip:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("order_id",t.$route.params.id),r.append("delivery_status","delivering"),e.next=5,t.$axios.$post("/delegate-start-order",r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){"success"==e.key?t.getDelegateOrders():t.$swal("","".concat(e.msg),"error")}));case 5:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getDelegateOrders(),this.getRefuseReasons(),this.order_id=this.$route.params.id}}),c=(r(638),r(46)),component=Object(c.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"book-trip section-pad"},[e("div",{staticClass:"container"},["inprogress"==t.order.status&&!1===t.order.payment_status?e("div",{staticClass:"text-done-me"},[t._v(" "+t._s(t.$t("orderAccept"))+" ")]):t._e(),t._v(" "),"inprogress"==t.order.status&&!0===t.order.payment_status?e("div",{staticClass:"text-done-me"},[t._v(" تم الدفع من قبل العميل ")]):t._e(),t._v(" "),e("div",{staticClass:"flex-groupme"},[e("h5",{staticClass:"main-title color-main font600 mb-5"},[t._v(" "+t._s(t.$t("OrderDetails"))+" ")])]),t._v(" "),e("div",{staticClass:"row justify-content-center mt-2 mb-5"},[e("div",{staticClass:"col-lg-6 col-12"},[e("div",{staticClass:"flex-all-new"},[e("div",{staticClass:"circle-spe text-center position-relative",class:{"main-cir":"pending"==t.order.status||"finished"==t.order.status||"finished_from_user"==t.order.status||"intransit"==t.order.status||"inprogress"==t.order.status}},[e("div",{staticClass:"real-circle",class:{"cir-active":"pending"==t.order.status||"finished"==t.order.status||"finished_from_user"==t.order.status||"intransit"==t.order.status||"inprogress"==t.order.status}},["pending"==t.order.status||"finished"==t.order.status||"finished_from_user"==t.order.status||"intransit"==t.order.status||"inprogress"==t.order.status?e("font-awesome-icon",{staticClass:"checkStep",attrs:{icon:["fas","check"]}}):t._e()],1),t._v(" "),e("div",{staticClass:"circle-text mt-2"},[t._v(" "+t._s(t.$t("new"))+" ")])]),t._v(" "),e("div",{staticClass:"circle-spe text-center position-relative",class:{"main-cir":"finished"==t.order.status||"finished_from_user"==t.order.status||"intransit"==t.order.status||"inprogress"==t.order.status}},[e("div",{staticClass:"real-circle",class:{"cir-active":"finished"==t.order.status||"finished_from_user"==t.order.status||"intransit"==t.order.status||"inprogress"==t.order.status}},["finished"==t.order.status||"finished_from_user"==t.order.status||"intransit"==t.order.status||"inprogress"==t.order.status?e("font-awesome-icon",{staticClass:"checkStep",attrs:{icon:["fas","check"]}}):t._e()],1),t._v(" "),e("div",{staticClass:"circle-text mt-2"},[t._v(" "+t._s(t.$t("paymentWait"))+" ")])]),t._v(" "),e("div",{staticClass:"circle-spe text-center position-relative",class:{"main-cir":"intransit"==t.order.status||"inprogress"==t.order.status&&1==t.order.payment_status||"finished"==t.order.status||"finished_from_user"==t.order.status}},[e("div",{staticClass:"real-circle",class:{"cir-active":"intransit"==t.order.status||"inprogress"==t.order.status&&1==t.order.payment_status||"finished"==t.order.status||"finished_from_user"==t.order.status}},["intransit"==t.order.status||"inprogress"==t.order.status&&1==t.order.payment_status||"finished"==t.order.status||"finished_from_user"==t.order.status?e("font-awesome-icon",{staticClass:"checkStep",attrs:{icon:["fas","check"]}}):t._e()],1),t._v(" "),e("div",{staticClass:"circle-text mt-2"},[t._v(" "+t._s(t.$t("active"))+" ")])]),t._v(" "),e("div",{staticClass:"circle-spe text-center position-relative",class:{"main-cir":"finished"==t.order.status||"finished_from_user"==t.order.status}},[e("div",{staticClass:"real-circle",class:{"cir-active":"finished"==t.order.status||"finished_from_user"==t.order.status}},["finished"==t.order.status||"finished_from_user"==t.order.status?e("font-awesome-icon",{staticClass:"checkStep",attrs:{icon:["fas","check"]}}):t._e()],1),t._v(" "),e("div",{staticClass:"circle-text mt-2"},[t._v(" "+t._s(t.$t("finished"))+" ")])])])])]),t._v(" "),e("div",{staticClass:"card-white card-pad"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 col-12"},[e("div",{staticClass:"card-right text-center"},[e("div",{staticClass:"card-t"},[t._v(" "+t._s(t.$t("goDate"))+" ")]),t._v(" "),e("div",{staticClass:"card-f"},[e("div",{staticClass:"card-f-text color-main"},[t._v(" "+t._s(t.order.go_date)+" ")])])])]),t._v(" "),e("div",{staticClass:"col-md-6 col-12"},[e("div",{staticClass:"card-right text-center"},[e("div",{staticClass:"card-t"},[t._v(" "+t._s(t.$t("date"))+" "+t._s(t.$t("return")))]),t._v(" "),e("div",{staticClass:"card-f"},[e("div",{staticClass:"card-f-text color-main"},[t._v(t._s(t.order.return_date))])])])])])]),t._v(" "),e("div",{staticClass:"card-white mt-5"},[e("div",{staticClass:"card-title text-center"},[t._v(" "+t._s(t.$t("OrderDetails"))+"\n\n          "),t._v(" "),"intransit"==t.order.status?e("div",[e("nuxt-link",{staticClass:"all-price-ma pill",attrs:{to:"/provider/pill/"+this.$route.params.id}},[t._v(" "+t._s(t.$t("orderPill"))+" ")])],1):t._e()]),t._v(" "),e("div",{staticClass:"card-white-body p-speee"},[e("div",{staticClass:"col-md-6 col-12 margin-auto mb-3"},[e("div",{staticClass:"table-offer"},[e("table",{staticClass:"table",attrs:{id:"myTable"}},[e("thead",[e("tr",[e("th",[t._v(" "+t._s(t.$t("numHours"))+" ")]),t._v(" "),e("th",[t._v(" "+t._s(t.$t("gooDate"))+" ")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.hours)+" "+t._s(t.$t("hour"))+" ")])]),t._v(" "),e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.go_time)+" ")])])])])])])]),t._v(" "),e("div",{staticClass:"col-md-8 col-12 margin-auto mb-3"},[e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-6 mb-3 pl-md-5"},[e("h5",{staticClass:"mb-2"},[t._v(" "+t._s(t.$t("freeAdditivs"))+" ")]),t._v(" "),t.free_additives.length>0?e("section",t._l(t.free_additives,(function(r){return e("div",{key:r.id,staticClass:"flex-bet yes-rap gray-col"},[e("div",{staticClass:"bet-right mb-3"},[t._v(" "+t._s(r.name)+" ")]),t._v(" "),e("div",{staticClass:"bet-right mb-3"},[t._v(" "+t._s(r.qty)+" ")])])})),0):e("section",[e("p",{staticClass:"text-center"},[t._v(" "+t._s(t.$t("noFree"))+" ")])])]),t._v(" "),e("div",{staticClass:"col-md-6 mb-3 pl-md-5"},[e("h5",{staticClass:"mb-2"},[t._v(" "+t._s(t.$t("paidFeatures"))+" ")]),t._v(" "),t.additives.length>0?e("section",t._l(t.additives,(function(r){return e("div",{key:r.id,staticClass:"flex-bet yes-rap gray-col"},[e("div",{staticClass:"bet-right mb-3"},[t._v(" "+t._s(r.name)+" ")]),t._v(" "),e("div",{staticClass:"bet-right mb-3"},[t._v(" "+t._s(r.qty)+" ")])])})),0):e("section",[e("p",{staticClass:"text-center"},[t._v(" "+t._s(t.$t("noPaid"))+" ")])])])]),t._v(" "),e("h5",{staticClass:"mb-3"},[t._v(" "+t._s(t.$t("notes"))+" :")]),t._v(" "),e("p",{staticClass:"para-w"},[t._v("\n              "+t._s(t.order.description)+"\n            ")]),t._v(" "),t.is_delegate_refused?e("div",[e("h5",{staticClass:"mb-3"},[t._v(" سبب رفض الرحلة:")]),t._v(" "),e("p",{staticClass:"para-w"},[t._v("\n                "+t._s(t.delegate_refused_reason)+"\n              ")])]):t._e(),t._v(" "),t.is_user_canceled?e("div",[e("h5",{staticClass:"mb-3"},[t._v(" سبب الغاء الرحلة:")]),t._v(" "),e("p",{staticClass:"para-w"},[t._v("\n                "+t._s(t.user_refused_reason)+"\n              ")])]):t._e()]),t._v(" "),e("div",{staticClass:"col-md-6 col-12 margin-auto"},[e("div",{staticClass:"table-offer"},[e("table",{staticClass:"table",attrs:{id:"myTable"}},[e("thead",[e("tr",[e("th",[t._v(" "+t._s(t.$t("reserveCount"))+" ")]),t._v(" "),e("th",[t._v(" "+t._s(t.$t("additivesMoney"))+" ")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.price)+" ر.س")])]),t._v(" "),e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.additives_price)+" ر.س ")])])])])])])]),t._v(" "),e("div",{staticClass:"col-md-6 col-12 margin-auto mb-4"},[e("div",{staticClass:"table-offer spe-table-o"},[e("table",{staticClass:"table",attrs:{id:"myTable"}},[e("thead",[e("tr",[e("th",[t._v(" "+t._s(t.$t("discountAmount"))+" ")]),t._v(" "),e("th",[t._v(" "+t._s(t.$t("additiveValue"))+" ")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.discount)+" ر.س ")])]),t._v(" "),e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.added_value)+" ر.س ")])])])])])]),t._v(" "),e("div",{staticClass:"table-offer spe-table-o"},[e("table",{staticClass:"table",attrs:{id:"myTable"}},[t._m(0),t._v(" "),e("tbody",[e("tr",[e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.app_percentage)+" ر.س ")])])])])])]),t._v(" "),e("div",{staticClass:"flex-bet all-price-ma"},[e("div",{staticClass:"right-all"},[t._v(" "+t._s(t.$t("total"))+" :")]),t._v(" "),e("div",{staticClass:"right-all"},[t._v(" "+t._s(t.order.total_price)+" ر.س")])])])])]),t._v(" "),"pending"==t.order.status?e("div",{staticClass:"flex-groupme"},[e("button",{staticClass:"btn-main up mt-4 lg",attrs:{type:"button"},on:{click:t.acceptOrder}},[t._v("\n          "+t._s(t.$t("accOrder"))+"\n        ")]),t._v(" "),e("button",{staticClass:"btn-main btn-danger up mt-4 lg",attrs:{type:"button"},on:{click:t.showRefuseModal}},[t._v("\n          "+t._s(t.$t("refuse_order"))+"\n        ")])]):t._e(),t._v(" "),"inprogress"==t.order.status&&!0===t.order.payment_status?e("div",{staticClass:"flex-groupme"},[e("button",{staticClass:"btn-main up mt-4 lg",attrs:{type:"button"},on:{click:function(e){return t.startTrip()}}},[t._v("\n          "+t._s(t.$t("start_trip"))+"\n        ")])]):t._e(),t._v(" "),"intransit"==t.order.status?e("div",{staticClass:"flex-groupme"},[e("button",{staticClass:"btn-main up mt-4 lg",attrs:{type:"button"},on:{click:function(e){return t.endTrip()}}},[t._v("\n          "+t._s(t.$t("finishTrip"))+"\n        ")])]):t._e()]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showAccept,expression:"showAccept"}],staticClass:"modalOverLay"},[e("section",{staticClass:"modal_body d-flex flex-column justify-content-center align-items-center"},[e("div",{staticClass:"flex-groupme mb-2"},[e("img",{staticClass:"modal-img-m",attrs:{src:r(480),alt:""}})]),t._v(" "),e("h5",{staticClass:"text-center mb-3 font-bold"},[t._v("\n              تهانينا تم ارسال الطلب في انتظار الدفع من العميل\n            ")]),t._v(" "),e("div",{staticClass:"text-center mb-4 font14 gray-col"},[t._v("\n              يمكنك متابعة الطلب من خلال صفحة حجوزاتي\n            ")]),t._v(" "),e("div",{staticClass:"flex-groupme mb-4"},[e("button",{staticClass:"btn-main up lg",on:{click:t.refreshOrder}},[t._v("متابعة الطلب")]),t._v(" "),e("nuxt-link",{staticClass:"btn-main up lg light-b",staticStyle:{color:"#111b5a !important"},attrs:{to:"/provider/HomePage"}},[t._v("الرئيسية")])],1)])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRefuse,expression:"showRefuse"}],staticClass:"modalOverLay"},[e("section",{staticClass:"modal_body d-flex flex-column"},[e("div",{staticClass:"flex-groupme mb-2"}),t._v(" "),e("h5",{staticClass:"text-center mb-3 font-bold"},[t._v("\n              "+t._s(t.$t("refuseOrder"))+"\n            ")]),t._v(" "),e("div",t._l(t.reasons,(function(r){return e("div",{key:r.id,staticClass:"d-flex mb-3 px-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticStyle:{margin:"0 10px"},attrs:{type:"radio",name:"reason",id:"reasnonItem"+r.id},domProps:{value:r.reason,checked:t._q(t.reason,r.reason)},on:{change:function(e){t.reason=r.reason}}}),t._v(" "),e("label",{attrs:{for:"reasnonItem"+r.id}},[t._v(" "+t._s(r.reason)+" ")])])})),0),t._v(" "),e("div",{staticClass:"flex-groupme mb-4"},[e("button",{staticClass:"btn-danger btn-main up lg",on:{click:t.refuseOrder}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),t._v(" "),e("button",{staticClass:"btn-main up lg light-b",staticStyle:{color:"#111b5a !important"},on:{click:t.closeRefuse}},[t._v(t._s(t.$t("return")))])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRate,expression:"showRate"}],staticClass:"modalOverLay"},[e("booksRate",{attrs:{user_name:t.user_name,user_avatar:t.user_avatar,user_id:t.user_id},on:{closeRate:t.closeRate}})],1)])}),[function(){var t=this._self._c;return t("thead",[t("tr",[t("th",[this._v(" عمولة التطبيق ")])])])}],!1,null,null,null);e.default=component.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{458:function(t,e,n){t.exports=n.p+"img/Group 70332.9444af4.png"},461:function(t,e,n){t.exports=n.p+"img/Rectangle 30488.a6683be.png"},679:function(t,e,n){"use strict";n.r(e);var o,r=n(0),c=n(16),l=(n(53),n(43),n(1),{data:function(){return{src:n(458),bg:n(461),phone:"",disabled:!1,country_key:"00966",countries:[],dropdownVisible:!1,defaultImage:"https://backend.bookaboat.app/assets/uploads/flags/96198928-39e5-4349-a8b1-35a036882ac2.png",device_type:"android"}},methods:(o={setVisitor:function(){localStorage.setItem("visitor","true"),this.$router.push("/provider/HomePage")},Login:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.disabled=!0,(n=new FormData(t.$refs.regForm)).append("phone",t.phone),n.append("device_type",t.device_type),n.append("device_id",localStorage.getItem("fcm")),n.append("country_key",t.country_key),n.append("type","delegate"),e.next=9,t.$axios.$post("/mobile/login",n).then((function(e){if("success"==e.key&&"delegate"==e.data.user.acc_type){t.$swal("","سيتم إرسال الكود على هذا الرقم","success"),localStorage.setItem("token",e.data.token);var n=JSON.stringify(e.data.user);localStorage.setItem("user",n),localStorage.setItem("phone",t.phone),localStorage.setItem("delegateLoggedIn",!0),localStorage.removeItem("visitor"),setTimeout((function(){t.$router.push("/providerActive")}),2e3)}else t.$swal("","".concat(e.msg),"error");t.disabled=!1}));case 9:case"end":return e.stop()}}),e)})))()},toggleDropdown:function(){this.dropdownVisible=!this.dropdownVisible},selectOption:function(option){this.country_key=option.calling_code,this.defaultImage=option.flag,this.dropdownVisible=!this.dropdownVisible}},Object(r.a)(o,"toggleDropdown",(function(){this.dropdownVisible=!this.dropdownVisible})),Object(r.a)(o,"selectOption",(function(option){this.country_key=option.calling_code,this.defaultImage=option.flag,this.dropdownVisible=!this.dropdownVisible})),Object(r.a)(o,"getCounrtyKey",(function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("countries").then((function(e){t.countries=e.data.countries}));case 2:case"end":return e.stop()}}),e)})))()})),o),mounted:function(){fetch("https://api.ipify.org?format=json").then((function(t){return t.json()})).then((function(data){return localStorage.setItem("device_id",data.ip)})).catch((function(t){return console.error(t)})),this.getCounrtyKey(),"true"==localStorage.getItem("delegateLoggedIn")&&this.$router.push("/providerActive")}}),d=n(46),component=Object(d.a)(l,(function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"img-background"},[e("img",{attrs:{src:t.bg,alt:""}})]),t._v(" "),e("div",{staticClass:"login"},[e("div",{staticClass:"container"},[e("div",{staticClass:"col-md-6 col-12 margin-auto p-0"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.Login.apply(null,arguments)}}},[e("div",{staticClass:"login-box mt-3"},[e("div",{staticClass:"login-img text-center mt-2"},[e("img",{attrs:{src:t.src,alt:""}})]),t._v(" "),e("div",{staticClass:"title-login text-center mt-3"},[t._v(t._s(t.$t("logIn"))+" ")]),t._v(" "),e("div",{staticClass:"under-title mb-3 text-center mt-2"},[t._v("\n              "+t._s(t.$t("fillData"))+"\n            ")]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-9 col-12 margin-auto"},[e("div",{staticClass:"mb-3 main-inp-cont"},[e("h6",{staticClass:"fontBold mainColor font14 font600"},[t._v(t._s(t.$t("phoneNumber"))+" ")]),t._v(" "),e("div",{staticClass:"relative-co"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"inp-spe-tele",staticStyle:{direction:"rtl"},attrs:{type:"tel",id:"telephone",placeholder:t.$t("fillPhoneNumber"),name:"phone"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),t._v(" "),e("div",{staticClass:"icon-float"},[e("font-awesome-icon",{attrs:{icon:["fas","mobile-screen-button"]}})],1),t._v(" "),e("div",{staticClass:"country_select"},[e("div",{staticClass:"selected-option",on:{click:t.toggleDropdown}},[e("img",{attrs:{src:t.defaultImage,alt:"Option Image"}}),t._v(" "),e("span",[t._v(t._s(t.country_key))])]),t._v(" "),t.dropdownVisible?e("div",{staticClass:"options-container"},t._l(t.countries,(function(option){return e("div",{key:option.id,staticClass:"option",on:{click:function(e){return t.selectOption(option)}}},[e("img",{attrs:{src:option.flag,alt:"Option Image"}}),t._v(" "),e("span",[t._v(t._s(option.calling_code))])])})),0):t._e()])])]),t._v(" "),e("div",{staticClass:"mt-4"},[e("button",{staticClass:"main-btn up mb-2",attrs:{disabled:t.disabled}},[t._v("\n                        "+t._s(t.$t("logIn"))+"\n                        "),t.disabled?e("div",{staticClass:"spinner-border",attrs:{role:"status"}}):t._e()])])])]),t._v(" "),e("div",{staticClass:"dont-have"},[t._v("\n               "+t._s(t.$t("noAccount"))),e("nuxt-link",{attrs:{to:"/providerRegister"}},[t._v(" / "+t._s(t.$t("newLogIn"))+"  ")])],1),t._v(" "),e("div",{staticClass:"forget-login mb-4"},[e("button",{staticClass:"decore-me font14 color-main",attrs:{type:"button"},on:{click:t.setVisitor}},[t._v(t._s(t.$t("visitorLogin"))+" ")])])])])])])])])}),[],!1,null,null,null);e.default=component.exports}}]);
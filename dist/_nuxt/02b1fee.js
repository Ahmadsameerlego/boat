(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{538:function(t,e,r){var content=r(632);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(68).default)("92102d60",content,!0,{sourceMap:!1})},631:function(t,e,r){"use strict";r(538)},632:function(t,e,r){var n=r(67)((function(i){return i[1]}));n.push([t.i,".btn-main:disabled{cursor:not-allowed;opacity:.4}.payment_radio{height:25px;margin-left:20px;width:25px}.payment_image{height:28px;width:28px}.btn-danger{background-color:#bd1212}.pill{align-items:center;border-radius:4px;color:#fff;display:flex;float:left;font-size:14px;height:36px;justify-content:center;margin-left:12px;margin-top:-29px;width:193px}.checkStep{color:#fff;left:29%;position:absolute;top:12px}.real-circle{position:relative}",""]),n.locals={},t.exports=n},727:function(t,e,r){"use strict";r.r(e);r(23),r(4),r(55);var n=r(16),o=(r(43),r(53),{data:function(){return{order:{},additives:[],free_additives:[],showAccept:!1,order_id:"",showCancel:!1,reasons:[],reason:!1,showRate:!1,user_id:"",user_name:"",user_avatar:"",delegate_id:"",delegate_avatar:"",delegate_name:"",payment_disabled:!0,pay_method:"",delegate_refused_reason:"",is_delegate_refused:null,user_refused_reason:"",is_user_canceled:null,brands:[],brand_type:null,brand_disabled:!0,brand_name:""}},watch:{reason:function(){console.log(this.reason)},pay_method:function(){""!==this.pay_method&&(this.payment_disabled=!1)},brand_type:function(){console.log(this.brand_type),null!==this.brand_type&&(this.brand_disabled=!1)}},methods:{getBrands:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/hyperpay-brands",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){t.brands=e.data.hyperpay_brands}));case 2:case"end":return e.stop()}}),e)})))()},paymentOnline:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$post();case 2:case"end":return e.stop()}}),e)})))()},getRefuseReasons:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/cancel-reasons",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){t.reasons=e.data.reasons}));case 2:case"end":return e.stop()}}),e)})))()},closeRate:function(){this.showRate=!1,this.getDelegateOrders()},getDelegateOrders:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/user-single-order?order_id=".concat(t.$route.params.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){t.order=e.data.order,t.additives=e.data.order.additives,t.free_additives=e.data.order.free_additives,t.user_id=e.data.order.user_id,t.user_avatar=e.data.order.user_avatar,t.user_name=e.data.order.user_name,t.delegate_name=e.data.order.delegate_name,t.delegate_id=e.data.order.delegate_id,t.delegate_avatar=e.data.order.delegate_avatar,t.delegate_refused_reason=e.data.order.delegate_refused_reason,t.is_delegate_refused=e.data.order.is_delegate_refused,t.is_user_canceled=e.data.order.is_user_canceled,t.user_refused_reason=e.data.order.user_refused_reason}));case 2:case"end":return e.stop()}}),e)})))()},closePayment:function(){document.getElementById("modal-19").style.display="none",document.getElementById("modal-19___BV_modal_backdrop_").style.display="none"},closeBrands:function(){document.getElementById("modal-chooseMethod").style.display="none",document.getElementById("modal-chooseMethod___BV_modal_backdrop_").style.display="none"},endTrip:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("order_id",t.$route.params.id),r.append("delivery_status","inprogress"),e.next=5,t.$axios.$post("/user-finish-order",r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){"success"==e.key?(t.$swal("","".concat(e.msg),"success"),setTimeout((function(){t.showRate=!0}),2e3)):t.$swal("","".concat(e.msg),"error")}));case 5:case"end":return e.stop()}}),e)})))()},cancelOrder:function(){this.showCancel=!0},closeRefuse:function(){this.showCancel=!1},refreshOrder:function(){this.showAccept=!1,this.getDelegateOrders()},paymentWithWallet:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("order_id",t.$route.params.id),e.next=4,t.$axios.$post("/pay-order-with-wallet",r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){"success"==e.key?(t.$swal("","".concat(e.msg),"success"),setTimeout((function(){t.showCancel=!1,t.getDelegateOrders()}),2e3)):t.$swal("","".concat(e.msg),"error")}));case 4:case"end":return e.stop()}}),e)})))()},refuseOrder:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("order_id",t.$route.params.id),r.append("reason",t.reason),e.next=5,t.$axios.$post("/cancel-order",r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){"success"==e.key?(t.$swal("","".concat(e.msg),"success"),setTimeout((function(){t.$router.push("/client/books/MyBooks")}),2e3)):t.$swal("","".concat(e.msg),"success")}));case 5:case"end":return e.stop()}}),e)})))()},startTrip:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("order_id",t.$route.params.id),r.append("delivery_status","delivering"),e.next=5,t.$axios.$post("/delegate-start-order",r,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){"success"==e.key?t.getDelegateOrders():t.$swal("","".concat(e.msg),"error")}));case 5:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getDelegateOrders(),this.getRefuseReasons(),this.getBrands(),this.order_id=this.$route.params.id}}),d=(r(631),r(46)),component=Object(d.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"book-trip section-pad"},[e("div",{staticClass:"container"},["inprogress"==t.order.status&&!1===t.order.payment_status?e("div",{staticClass:"text-done-me"},[t._v(" "+t._s(t.$t("orderAccept"))+" ")]):t._e(),t._v(" "),e("div",{staticClass:"flex-groupme"},[e("h5",{staticClass:"main-title color-main font600 mb-5"},[t._v(" "+t._s(t.$t("OrderDetails"))+" ")])]),t._v(" "),e("div",{staticClass:"row justify-content-center mt-2 mb-5"},[e("div",{staticClass:"col-lg-6 col-12"},[e("div",{staticClass:"flex-all-new"},[e("div",{staticClass:"circle-spe text-center position-relative",class:{"main-cir":"pending"==t.order.status||"finished"==t.order.status||"intransit"==t.order.status||"inprogress"==t.order.status}},[e("div",{staticClass:"real-circle",class:{"cir-active":"pending"==t.order.status||"finished"==t.order.status||"intransit"==t.order.status||"inprogress"==t.order.status}},["pending"==t.order.status||"finished"==t.order.status||"intransit"==t.order.status||"inprogress"==t.order.status?e("font-awesome-icon",{staticClass:"checkStep",attrs:{icon:["fas","check"]}}):t._e()],1),t._v(" "),e("div",{staticClass:"circle-text mt-2"},[t._v(" "+t._s(t.$t("new"))+" ")])]),t._v(" "),e("div",{staticClass:"circle-spe text-center position-relative",class:{"main-cir":"finished"==t.order.status||"intransit"==t.order.status||"inprogress"==t.order.status}},[e("div",{staticClass:"real-circle",class:{"cir-active":"finished"==t.order.status||"intransit"==t.order.status||"inprogress"==t.order.status}},["finished"==t.order.status||"intransit"==t.order.status||"inprogress"==t.order.status?e("font-awesome-icon",{staticClass:"checkStep",attrs:{icon:["fas","check"]}}):t._e()],1),t._v(" "),e("div",{staticClass:"circle-text mt-2"},[t._v(" "+t._s(t.$t("paymentWait"))+" ")])]),t._v(" "),e("div",{staticClass:"circle-spe text-center position-relative",class:{"main-cir":"intransit"==t.order.status&&1==t.order.payment_status||"inprogress"==t.order.status&&1==t.order.payment_status||"finished"==t.order.status}},[e("div",{staticClass:"real-circle",class:{"cir-active":"intransit"==t.order.status&&1==t.order.payment_status||"inprogress"==t.order.status&&1==t.order.payment_status||"finished"==t.order.status}},["intransit"==t.order.status&&1==t.order.payment_status||"inprogress"==t.order.status&&1==t.order.payment_status||"finished"==t.order.status?e("font-awesome-icon",{staticClass:"checkStep",attrs:{icon:["fas","check"]}}):t._e()],1),t._v(" "),e("div",{staticClass:"circle-text mt-2"},[t._v(" "+t._s(t.$t("active"))+" ")])]),t._v(" "),e("div",{staticClass:"circle-spe text-center position-relative",class:{"main-cir":"finished"==t.order.status}},[e("div",{staticClass:"real-circle",class:{"cir-active":"finished"==t.order.status}},["finished"==t.order.status?e("font-awesome-icon",{staticClass:"checkStep",attrs:{icon:["fas","check"]}}):t._e()],1),t._v(" "),e("div",{staticClass:"circle-text mt-2"},[t._v(" "+t._s(t.$t("finished"))+" ")])])])])]),t._v(" "),e("div",{staticClass:"card-white card-pad"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 col-12"},[e("div",{staticClass:"card-right text-center"},[e("div",{staticClass:"card-t"},[t._v(" "+t._s(t.$t("goDate"))+" ")]),t._v(" "),e("div",{staticClass:"card-f"},[e("div",{staticClass:"card-f-text color-main"},[t._v(" "+t._s(t.order.go_date)+" ")])])])]),t._v(" "),e("div",{staticClass:"col-md-6 col-12"},[e("div",{staticClass:"card-right text-center"},[e("div",{staticClass:"card-t"},[t._v(t._s(t.$t("returnDate")))]),t._v(" "),e("div",{staticClass:"card-f"},[e("div",{staticClass:"card-f-text color-main"},[t._v(t._s(t.order.return_date))])])])])])]),t._v(" "),e("div",{staticClass:"card-white mt-5"},[e("div",{staticClass:"card-title text-center"},[t._v(" "+t._s(t.$t("OrderDetails"))+"\n\n          "),t._v(" "),"inprogress"==t.order.status&&1==t.order.payment_status?e("div",[e("nuxt-link",{staticClass:"all-price-ma pill",attrs:{to:"/client/pill/"+this.$route.params.id}},[t._v(" "+t._s(t.$t("orderPill"))+" ")])],1):t._e()]),t._v(" "),e("div",{staticClass:"card-white-body p-speee"},[e("div",{staticClass:"col-md-6 col-12 margin-auto mb-3"},[e("div",{staticClass:"table-offer"},[e("table",{staticClass:"table",attrs:{id:"myTable"}},[e("thead",[e("tr",[e("th",[t._v(" "+t._s(t.$t("numHours"))+" ")]),t._v(" "),e("th",[t._v(" "+t._s(t.$t("gooDate"))+" ")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.hours)+" ساعة")])]),t._v(" "),e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.go_time)+" ")])])])])])])]),t._v(" "),e("div",{staticClass:"col-md-8 col-12 margin-auto mb-3"},[e("div",{staticClass:"row mt-3"},[e("div",{staticClass:"col-md-6 mb-3 pl-md-5"},[e("h5",{staticClass:"mb-2"},[t._v(" "+t._s(t.$t("freeAdditivs"))+" ")]),t._v(" "),t.free_additives.length>0?e("section",t._l(t.free_additives,(function(r){return e("div",{key:r.id,staticClass:"flex-bet yes-rap gray-col"},[e("div",{staticClass:"bet-right mb-3"},[t._v(" "+t._s(r.name)+" ")]),t._v(" "),e("div",{staticClass:"bet-right mb-3"},[t._v(" "+t._s(r.qty)+" ")])])})),0):e("section",[e("p",{staticClass:"text-center"},[t._v(" "+t._s(t.$t("noFree"))+" ")])])]),t._v(" "),e("div",{staticClass:"col-md-6 mb-3 pl-md-5"},[e("h5",{staticClass:"mb-2"},[t._v(" "+t._s(t.$t("paidFeatures"))+" ")]),t._v(" "),t.additives.length>0?e("section",t._l(t.additives,(function(r){return e("div",{key:r.id,staticClass:"flex-bet yes-rap gray-col"},[e("div",{staticClass:"bet-right mb-3"},[t._v(" "+t._s(r.name)+" ")]),t._v(" "),e("div",{staticClass:"bet-right mb-3"},[t._v(" "+t._s(r.qty)+" ")])])})),0):e("section",[e("p",{staticClass:"text-center"},[t._v(" "+t._s(t.$t("noPaid"))+" ")])])])]),t._v(" "),e("h5",{staticClass:"mb-3"},[t._v(t._s(t.$t("notes"))+":")]),t._v(" "),e("p",{staticClass:"para-w"},[t._v("\n              "+t._s(t.order.description)+"\n            ")]),t._v(" "),t.is_delegate_refused?e("div",[e("h5",{staticClass:"mb-3"},[t._v(" سبب رفض الرحلة:")]),t._v(" "),e("p",{staticClass:"para-w"},[t._v("\n                "+t._s(t.delegate_refused_reason)+"\n              ")])]):t._e(),t._v(" "),t.is_user_canceled?e("div",[e("h5",{staticClass:"mb-3"},[t._v(" سبب الغاء الرحلة:")]),t._v(" "),e("p",{staticClass:"para-w"},[t._v("\n                "+t._s(t.user_refused_reason)+"\n              ")])]):t._e()]),t._v(" "),e("div",{staticClass:"col-md-6 col-12 margin-auto"},[e("div",{staticClass:"table-offer"},[e("table",{staticClass:"table",attrs:{id:"myTable"}},[e("thead",[e("tr",[e("th",[t._v(" "+t._s(t.$t("reserveCount"))+" ")]),t._v(" "),e("th",[t._v(" "+t._s(t.$t("additivesMoney"))+" ")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.price)+" ر.س")])]),t._v(" "),e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.additives_price)+" ر.س ")])])])])])])]),t._v(" "),e("div",{staticClass:"col-md-6 col-12 margin-auto mb-4"},[e("div",{staticClass:"table-offer spe-table-o"},[e("table",{staticClass:"table",attrs:{id:"myTable"}},[e("thead",[e("tr",[e("th",[t._v(" "+t._s(t.$t("discountAmount"))+" ")]),t._v(" "),e("th",[t._v(" "+t._s(t.$t("additiveValue"))+" ")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.discount)+" ر.س ")])]),t._v(" "),e("td",[e("span",{staticClass:"gray-col"},[t._v(" "+t._s(t.order.added_value)+" ر.س ")])])])])])]),t._v(" "),e("div",{staticClass:"flex-bet all-price-ma"},[e("div",{staticClass:"right-all"},[t._v(t._s(t.$t("total"))+" :")]),t._v(" "),e("div",{staticClass:"right-all"},[t._v(" "+t._s(t.order.total_price)+" ر.س")])])])])]),t._v(" "),"inprogress"==t.order.status&&0==t.order.payment_status?e("div",{staticClass:"flex-groupme"},[e("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-19",modifiers:{"modal-19":!0}}],staticClass:"btn-main up mt-4 lg",attrs:{type:"button"}},[t._v("\n          "+t._s(t.$t("pay"))+"\n        ")]),t._v(" "),e("b-modal",{attrs:{id:"modal-19"}},[e("section",{staticClass:"payment_method"},[e("h5",{staticClass:"text-center"},[t._v(" "+t._s(t.$t("payPlace"))+"  ")]),t._v(" "),e("form",[e("div",{staticClass:"d-flex align-items-center mt-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.pay_method,expression:"pay_method"}],staticClass:"payment_radio",attrs:{type:"radio",name:"pay_method",id:"payment"},domProps:{checked:t._q(t.pay_method,null)},on:{change:function(e){t.pay_method=null}}}),t._v(" "),e("label",{staticClass:"d-flex",attrs:{for:"payment"}},[e("img",{staticClass:"payment_image",attrs:{src:t.order.payment_method.image,alt:""}}),t._v(" "),e("div",[e("h6",{staticClass:"color-main"},[t._v(" "+t._s(t.order.payment_method.name)+" ")]),t._v(" "),e("p",{staticClass:"text-muted"},[t._v(" "+t._s(t.order.payment_method.desc)+" ")])])])]),t._v(" "),e("div",{staticClass:"flex-groupme mb-4 mt-4"},["wallet"==t.order.payment_method.key?e("button",{staticClass:"btn-main up lg",attrs:{type:"button",disabled:t.payment_disabled},on:{click:t.paymentWithWallet}},[t._v(" "+t._s(t.$t("pay"))+"\n                ")]):t._e(),t._v(" "),"online"==t.order.payment_method.key?e("a",{staticClass:"btn-main up lg",attrs:{disabled:t.payment_disabled,href:"https://backend.bookaboat.app/pay-invoice/"+t.order.id,target:"_blank"}},[t._v(" "+t._s(t.$t("pay"))+"\n              ")]):t._e(),t._v(" "),e("button",{staticClass:"btn-main up lg light-b",staticStyle:{color:"#111b5a !important"},on:{click:t.closePayment}},[t._v(" "+t._s(t.$t("return"))+" ")])])])])])],1):t._e(),t._v(" "),e("b-modal",{attrs:{id:"modal-chooseMethod"}},[e("section",{staticClass:"payment_method"},[e("h5",{staticClass:"text-center"},[t._v(" اختر وسيلة الدفع  ")]),t._v(" "),e("form",[t._l(t.brands,(function(r){return e("div",{key:r.id,staticClass:"d-flex align-items-center mt-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.brand_type,expression:"brand_type"}],staticClass:"payment_radio",attrs:{type:"radio",name:"brand_type"},domProps:{value:r.brand,checked:t._q(t.brand_type,r.brand)},on:{change:function(e){t.brand_type=r.brand}}}),t._v(" "),e("label",{staticClass:"d-flex",attrs:{for:"payment"}},[e("img",{staticClass:"payment_image",attrs:{src:r.image,alt:""}}),t._v(" "),e("div",[e("h6",{staticClass:"color-main"},[t._v(" "+t._s(r.name)+" ")]),t._v(" "),e("p",{staticClass:"text-muted"},[t._v(" "+t._s(r.brand)+" ")])])])])})),t._v(" "),e("div",{staticClass:"flex-groupme mb-4 mt-4"},[e("button",{staticClass:"btn-main up lg",attrs:{type:"button",brand_disabled:t.brand_disabled},on:{click:t.paymentOnline}},[t._v(" \n                  استمرار\n                ")]),t._v(" "),e("button",{staticClass:"btn-main up lg light-b",staticStyle:{color:"#111b5a !important"},on:{click:t.closeBrands}},[t._v(" "+t._s(t.$t("return"))+" ")])])],2)])]),t._v(" "),"inprogress"!=t.order.status&&"pending"!=t.order.status||0!=t.order.payment_status?t._e():e("div",{staticClass:"flex-groupme"},[e("button",{staticClass:"btn-main btn-danger up mt-4 lg",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.cancelOrder()}}},[t._v("\n          "+t._s(t.$t("cancelTrip"))+"\n        ")])]),t._v(" "),"intransit"==t.order.status&&1==t.order.payment_status||"inprogress"==t.order.status&&1==t.order.payment_status?e("div",{staticClass:"flex-groupme"},[e("button",{staticClass:"btn-main up mt-4 lg",attrs:{type:"button"},on:{click:function(e){return t.endTrip()}}},[t._v("\n          "+t._s(t.$t("finishTrip"))+"\n        ")])]):t._e()],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showRate,expression:"showRate"}],staticClass:"modalOverLay"},[e("booksRate",{attrs:{delegate_name:t.delegate_name,delegate_id:t.delegate_id,delegate_avatar:t.delegate_avatar,user_name:t.user_name,user_avatar:t.user_avatar,user_id:t.user_id},on:{closeRate:t.closeRate}})],1),t._v(" "),t.showCancel?e("div",{staticClass:"modalOverLay"},[e("section",{staticClass:"modal_body d-flex flex-column"},[e("div",{staticClass:"flex-groupme mb-2"}),t._v(" "),e("h5",{staticClass:"text-center mb-3 font-bold"},[t._v("\n            "+t._s(t.$t("cancelReason"))+"\n          ")]),t._v(" "),e("div",t._l(t.reasons,(function(r){return e("div",{key:r.id,staticClass:"d-flex mb-3 px-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],staticStyle:{margin:"0 10px"},attrs:{type:"radio",name:"reason",id:"reasnonItem"+r.id},domProps:{value:r.reason,checked:t._q(t.reason,r.reason)},on:{change:function(e){t.reason=r.reason}}}),t._v(" "),e("label",{attrs:{for:"reasnonItem"+r.id}},[t._v(" "+t._s(r.reason)+" ")])])})),0),t._v(" "),e("div",{staticClass:"flex-groupme mb-4"},[e("button",{staticClass:"btn-danger btn-main up lg",on:{click:t.refuseOrder}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),t._v(" "),e("button",{staticClass:"btn-main up lg light-b",staticStyle:{color:"#111b5a !important"},on:{click:t.closeRefuse}},[t._v(" "+t._s(t.$t("return"))+" ")])])])]):t._e()])}),[],!1,null,null,null);e.default=component.exports}}]);